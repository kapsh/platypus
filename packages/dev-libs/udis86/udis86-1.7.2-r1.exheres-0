# Copyright 2018 Alexander Kapshuna <kapsh@kap.sh>
# Distributed under the terms of the GNU General Public License v2

require sourceforge [ suffix=tar.gz ]
require autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.16 ] ]

SUMMARY="Udis86 Disassembler for x86 and x86-64"

LICENCES="BSD-2"
SLOT="0"
PLATFORMS="~amd64"
MYOPTIONS=""

DEPENDENCIES="
    test:
        dev-lang/python:2.7
        dev-lang/yasm
"

DEFAULT_SRC_CONFIGURE_PARAMS=(
    --with-python=/usr/$(exhost --target)/bin/python2.7
)

src_prepare() {
    # Hardcoded path /usr/share/docs/udis86/x86
    edo sed "s|^docdir =.\+$|docdir = @docdir@/x86|" \
        -i docs/x86/Makefile.am
    autotools_src_prepare
}

